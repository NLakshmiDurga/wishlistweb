<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<title>categories</title>
	<style type="text/css">
		.heading{
			background-color : orange;
			color : white;
			text-align : center;
			font-family: FreeMono;
			font-style: oblique;
			font-size: 60px;
			/*padding-right: 50px;*/
			/*margin-bottom: 10px;*/
		}
		.basketitems{
			max-height: 370px;
			background-color: #cccccc;
			margin:0 0 10px;
		}
		#categoryadditemsbutton{
			bottom: 0px;
			/*top: 500px;*/
			right: 10px;
			max-height: 400px;
			position: fixed;
		}
		.inner-addon { 
		    position: relative; 
		}

		 /*style icon */
		.inner-addon .glyphicon {
		  position: absolute;
		  padding: 15px;
		}

		/* align icon */
		.right-addon .glyphicon { right: 0px;}
	</style>
</head>
<body>
	<!-- <div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<div class="heading">
				<h1>WISH CART</h1>
			</div>
		</div>
	</div> -->
	<!-- <div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<div class="inner-addon right-addon">
			    <i class="glyphicon glyphicon-th-large"></i>
			    <input type="text" placeholder="Want to buy...." id="searchbox" style="background-color:#cccccc" class="form-control input-lg" />
			</div>
		</div>
	</div>
	</br> -->
	<div class="row">
		<div class="category"></div>
		<div class="categoryitems" style="background-color:#cccccc"></div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<div class="basketitems"></div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<button type="button" id="saveitemsbutton" style="background-color:#609f80" class="btn btn-lg btn-block">SAVE</button>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<button type="button" id="categoryadditemsbutton" style="background-color:#609f80" class="btn btn-lg btn-block">
				<!-- <a href="/basket/basketitems.html"></a> -->
			</button>
		</div>
	</div>
	<script type="text/javascript">
	var selectedItems = [];
	$(".categoryitems").hide();
	$("#saveitemsbutton").hide();
	$("#categoryadditemsbutton").hide();
	$.ajax({
		url : "categories.php",
		success : function(responseData){
			$(".category").empty();
			var json_categories = $.parseJSON(responseData);
			for(var counter = 0;counter<json_categories.length;counter++){
				var json_string = json_categories[counter].categoryname;
				var string_first_letter = json_string.charAt(0);
				console.log("first letter ",string_first_letter);
				$(".category").append($("<div class='col-xs-4 col-md-4 col-sm-4 col-lg-4'>").append($("<div class='categoriesdiv' style='background-color:#ad8592;text-align:center;margin:0 0 30px' category-id='"+json_categories[counter].categoryId+"'>").append($("<p style='text-align:center'>"+string_first_letter+"</p>")).append(json_string+"</div></div>")));
				if (counter == 2) {
					$(".category").append("<br>");
				}
			}
			console.log("success ajax",responseData);
		},
		error : function(xhr,status,errorThrown){
			console.log("Error while making ajax ",status);
		}
	})

	// function showbasket(){
	// 	$(".basketitems").empty();
	// 	for (var counter = 0; counter < category_selected_items.length; counter++) {
	// 		$(".basketitems").append($("<ul>").append($("<li>").append($("<span class=deleteicon task-id='"+counter+"'>").append(category_selected_items[counter].item_name).append("<img src=/basket/images/deleteicon.png style='width:20px;height:20px;float:right'>"))));
	// 	};
	// }
	
	$("#categoryadditemsbutton").click(function(){
		$("#categoryadditemsbutton").hide();
		$(".categoriesdiv").hide();
		$(".categoryitems").hide();
		$("#saveitemsbutton").show();
		$(":checkbox:checked").each(function(){
			var checkboxvalue = $(this).val();
			console.log("checkboxvalue ",checkboxvalue);
			checkboxvalueid = $(this).attr('item-id');
			console.log("check box value id ",checkboxvalueid);
			selectedItems.push({item_id:checkboxvalueid,itemname:checkboxvalue});
			console.log(selectedItems);
		})
	})
	
	$(".category").on("click",".categoriesdiv",function(){
		$(".categoriesdiv").hide();
		$(".categoryitems").show();
		$("#categoryadditemsbutton").show();
		var click_result = $(this).attr('category-id');
		$("#categoryadditemsbutton").text("Add items to basket");
		console.log("Clicked item ",click_result);
		$.ajax({
			url : "get_items.php",
			data : {
				categoryid : click_result
			},
			type : "GET",
			success : function(responseData){
				$(".categoryitems").empty();
				var category_items = $.parseJSON(responseData);
				console.log(category_items);
				for(var counter=0;counter<category_items.length;counter++){
					$(".categoryitems").append("<ul><li>"+category_items[counter].itemname+"<input type='checkbox' style='float:right' class='searchbox' item-id='"+category_items[counter].itemid+"' value='"+category_items[counter].itemname+"'>");
				}
				console.log("Success ajax ",responseData);
			},
			error : function(xhr,status,errorThrown){
				console.log("Error while making ajax ",status)
			}
		})
	})
	</script>
</body>
</html>

<!-- <div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<div class="heading">
				<h1>WISH CART</h1>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">
			<div class="inner-addon right-addon">
			    <i class="glyphicon glyphicon-th-large"></i>
			    <input type="text" placeholder="Want to buy...." id="searchbox" style="background-color:#cccccc" class="form-control input-lg" />
			</div>
		</div>
	</div>
	</br> -->
